name: ğŸ›¡ï¸ CI Audit

on:
  pull_request:
  push:
    branches: [main, develop]

jobs:
  audit:
    runs-on: ubuntu-latest

    steps:
      - uses: actions/checkout@v4

      # 1ï¸âƒ£  Install PNPM first
      - name: ğŸŸ£ Set up PNPM
        uses: pnpm/action-setup@v4
        with:
          run_install: true        # or true
          standalone: true
      
      # 2ï¸âƒ£  Set up Node (pnpm now in PATH, cache restore safe)
      - name: ğŸ”§ Set up Node 20
        uses: actions/setup-node@v4
        with:
          node-version: 20
          cache: pnpm

      # 3ï¸âƒ£  Lint / type-check / unit tests
      - name: ğŸ” Lint, type-check, tests
        run: pnpm run ci
